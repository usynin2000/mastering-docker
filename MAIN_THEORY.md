CHAT: https://chatgpt.com/c/692154fb-2b80-8329-aef2-96050f05f587 ouc

> –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–ª–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö. 

> –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –æ–±—Ä–∞–∑–∞ (image).

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç:

- —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (PID),
- –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã (network),
- —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É (–∫–æ–º–±–∏–Ω–∞—Ü–∏—è read-only —Å–ª–æ—ë–≤ –æ–±—Ä–∞–∑–∞ + writable —Å–ª–æ–π —Å–≤–µ—Ä—Ö—É),
- –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —á–µ—Ä–µ–∑ cgroups (CPU, –ø–∞–º—è—Ç—å, I/O).


–ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏:
- –õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ—Å—Ç—å: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–µ–ª—è—Ç —è–¥—Ä–æ –û–° —Å —Ö–æ—Å—Ç–æ–º, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –Ω–∞–º–Ω–æ–≥–æ ¬´ –ª–µ–≥—á–µ ¬ª –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω.
- –ü–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π —Å—Ä–µ–¥–µ.
- –°–∫–æ—Ä–æ—Å—Ç—å —Å—Ç–∞—Ä—Ç–∞: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.

> –ê–Ω–∞–ª–æ–≥–∏—è: –æ–±—Ä–∞–∑ ‚Äî —ç—Ç–æ —Ä–µ—Ü–µ–ø—Ç + –≥–æ—Ç–æ–≤—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã; –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–æ–µ –±–ª—é–¥–æ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –µ—Å—Ç—å (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å).


### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä vs –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ (VM)

> –ö–æ—Ä–æ—Ç–∫–æ ‚Äî —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ VM –ø–æ—Ö–æ–∂–∏–µ —Ü–µ–ª–∏ (–∏–∑–æ–ª—è—Ü–∏—è), –Ω–æ —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã.


| –ü–∞—Ä–∞–º–µ—Ç—Ä           |                                         –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞                                 |
| ------------------ | ------------------------------------------------: | -------------------------------------------------- |
| –ò–∑–æ–ª—è—Ü–∏—è           |        –ü—Ä–æ—Ü–µ—Å—Å—ã, –Ω–µ–π–º—Å–ø–µ–π—Å—ã, cgroups (–¥–µ–ª–∏—Ç —è–¥—Ä–æ) | –ü–æ–ª–Ω–∞—è ‚Äî —Å–≤–æ–µ —è–¥—Ä–æ, BIOS, –∞–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è |
| –†–∞–∑–º–µ—Ä             |                  –ú–µ–≥–∞–±–∞–π—Ç—ã ‚Äî –æ–±—Ä–∞–∑—ã –æ–±—ã—á–Ω–æ –º–µ–Ω—å—à–µ | –ì–∏–≥–∞–±–∞–π—Ç—ã ‚Äî —Ü–µ–ª–∞—è –û–°                               |
| –í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞       |                            –ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã ‚Äî —Å–µ–∫—É–Ω–¥—ã | –ú–∏–Ω—É—Ç—ã                                             |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |        –ü–æ—á—Ç–∏ –Ω–∞—Ç–∏–≤–Ω–∞—è (–º–µ–Ω—å—à–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤) | –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é                 |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ      | –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, CI, dev, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π | –ò–∑–æ–ª—è—Ü–∏—è —Ä–∞–∑–Ω—ã—Ö –û–°, —Å—Ç–∞—Ä–æ–µ –ü–û, –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä—ã         |


–ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å —á—Ç–æ:

–ù—É–∂–Ω–∞ –±—ã—Å—Ç—Ä–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å—Ä–µ–¥—ã ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –∞–ø–ø–∞—Ä–∞—Ç–Ω–∞—è/—è–¥—Ä–æ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è –∏–ª–∏ –∑–∞–ø—É—Å–∫ –¥—Ä—É–≥–æ–π –û–° ‚Äî VM.


### Docker Engine, Daemon, CLI ‚Äî —á—Ç–æ —ç—Ç–æ –∏ –∫–∞–∫ –æ–Ω–∏ —Å–≤—è–∑–∞–Ω—ã
- Docker Engine ‚Äî —ç—Ç–æ –æ–±—â–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Docker, –∫–æ—Ç–æ—Ä–∞—è –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å–µ—Ä–≤–µ—Ä–Ω—É—é —á–∞—Å—Ç—å –∏ –∫–ª–∏–µ–Ω—Ç.

- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: Docker Daemon (server), REST API, Docker CLI (client).

- Docker Daemon (dockerd) ‚Äî —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞–∑–∞–º–∏, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, —Å–µ—Ç—å—é –∏ —Ç–æ–º–∞–º–∏. –° –Ω–∏–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç CLI —á–µ—Ä–µ–∑ API. –ù–∞ Linux –æ–±—ã—á–Ω–æ dockerd.

- Docker CLI (docker) ‚Äî –∫–æ–º–∞–Ω–¥–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞, –∫–æ—Ç–æ—Ä—É—é —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (docker run, docker build –∏ —Ç.–¥.). CLI –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –Ω–∞ daemon —á–µ—Ä–µ–∑ REST API (–ª–æ–∫–∞–ª—å–Ω–æ –ø–æ —Å–æ–∫–µ—Ç—É –ª–∏–±–æ –ø–æ TCP).

–ü—Ä–∏–º–µ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
–¢—ã –Ω–∞–±–∏—Ä–∞–µ—à—å docker run nginx. 

CLI —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å -> –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç daemon -> daemon —Å–æ–∑–¥–∞—ë—Ç/–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -> –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å.


### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è: Image, Container, Registry, Layers, Tag

#### Image (–æ–±—Ä–∞–∑)
- –û–±—Ä–∞–∑ ‚Äî —ç—Ç–æ —Å–ª–µ–ø–æ–∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É–∂–∏—Ç —à–∞–±–ª–æ–Ω–æ–º –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
- –û–±—Ä–∞–∑—ã –æ–±—ã—á–Ω–æ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏–∑ Dockerfile –∏ —Å–æ—Å—Ç–æ—è—Ç –∏–∑ —Å–ª–æ—ë–≤ (layers). –û–±—Ä–∞–∑—ã –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã (immutable).
- –ö–æ–º–∞–Ω–¥—ã:
    - docker images ‚Äî —Å–ø–∏—Å–æ–∫ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤.
    - docker pull ubuntu:22.04 ‚Äî —Å–∫–∞—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞–∑ –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞.

–ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ Dockerfile:
```dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["python", "app.py"]
```

docker build -t myapp:1.0 .


#### Container (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π (–∏–ª–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–π, –Ω–æ –Ω–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π) —ç–∫–∑–µ–º–ø–ª—è—Ä –æ–±—Ä–∞–∑–∞. –û–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–µ—Ä—Ö—É –æ–±—Ä–∞–∑–∞ writable layer, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã.
- –ö–æ–º–∞–Ω–¥—ã:
```shell
docker run -d --name web -p 8080:80 nginx  # ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å nginx –≤ —Ñ–æ–Ω–µ, –ø—Ä–æ–±—Ä–æ—Å–∏–≤ –ø–æ—Ä—Ç.
docker ps # ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
docker ps -a # ‚Äî –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –≤–∫–ª—é—á–∞—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ.
docker exec -it <container> /bin/bash # ‚Äî –∑–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä—å –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
docker stop <container> / docker rm <container>.
```

–í–∞–∂–Ω–æ: –µ—Å–ª–∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî writable —Å–ª–æ–π –∏ –¥–∞–Ω–Ω—ã–µ –≤ –Ω—ë–º —É–¥–∞–ª—è—é—Ç—Å—è (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã volume).


### Registry (—Ä–µ–µ—Å—Ç—Ä)

- Registry ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤. –ü—Ä–∏–º–µ—Ä—ã: Docker Hub, GitHub Container Registry, GitLab Registry, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ä–µ–µ—Å—Ç—Ä—ã (Harbor, Artifactory).

- –û–±—Ä–∞–∑—ã –ø—É—à–∞—Ç—Å—è/–ø—É–ª–ª—è—Ç—Å—è –ø–æ –∏–º–µ–Ω–∏ registry.domain.com/namespace/image:tag.

–ö–æ–º–∞–Ω–¥—ã:
    - docker push myrepo/myimage:1.0
    - docker pull myrepo/myimage:1.0
    - docker login ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.


### Layers (—Å–ª–æ–∏)

- –°–ª–æ–∏ ‚Äî —ç—Ç–æ —Ü–µ–ø–æ—á–∫–∞ —Ñ–∞–π–ª–æ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π (diff), –≥–¥–µ –∫–∞–∂–¥—ã–π —Å–ª–æ–π —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π –≤ Dockerfile (–Ω–∞–ø—Ä–∏–º–µ—Ä RUN, COPY, ADD).
- –°–ª–æ–∏ —è–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (read-only) –∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é union filesystem (overlay2 –∏ —Ç.–ø.). –ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–æ–π ‚Äî writable –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
    - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ: –µ—Å–ª–∏ —Å–ª–æ–π –Ω–µ –ø–æ–º–µ–Ω—è–ª—Å—è, Docker –±–µ—Ä—ë—Ç –µ–≥–æ –∏–∑ –∫–µ—à–∞.
    - –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: —Å–ª–æ–∏ –º–æ–≥—É—Ç —Ä–∞–∑–¥–µ–ª—è—Ç—å—Å—è –º–µ–∂–¥—É –æ–±—Ä–∞–∑–∞–º–∏, —É–º–µ–Ω—å—à–∞—è –æ–±—ä—ë–º —Ö—Ä–∞–Ω–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:
    - docker history myimage:tag ‚Äî —Å–ø–∏—Å–æ–∫ —Å–ª–æ—ë–≤ –∏ —Ä–∞–∑–º–µ—Ä–æ–≤.
    - docker inspect myimage:tag ‚Äî –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–≤–∫–ª—é—á–∞—è —Å–ª–æ–∏, rootfs).

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–æ–ª—å—à–∏—Ö —Å–ª–æ—ë–≤ –∏ –∏—Å–ø–æ–ª—å–∑—É–π .dockerignore, —Å—Ç–∞—Ä–∞–π—Å—è –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã RUN —Ç–∞–º, –≥–¥–µ —ç—Ç–æ —Ä–∞–∑—É–º–Ω–æ, —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å —á–∏—Å–ª–æ —Å–ª–æ—ë–≤ –∏ —Ä–∞–∑–º–µ—Ä.


### Tag (—Ç–µ–≥)
- –¢–µ–≥ ‚Äî —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–π –∞–ª–∏–∞—Å –¥–ª—è –æ–±—Ä–∞–∑–∞ (–æ–±—ã—á–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é). –§–æ—Ä–º–∞—Ç: image:tag. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–≥ latest.
- –¢–µ–≥ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–Ω—ã–π manifest / digest –≤ —Ä–µ–µ—Å—Ç—Ä–µ. –¢–µ–≥ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–µ–≥–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:
    - docker tag myapp:1.0 myrepo/myapp:1.0
    - docker push myrepo/myapp:1.0
- Digest ‚Äî —Ö–µ—à (sha256) –æ–±—Ä–∞–∑–∞, —É–Ω–∏–∫–∞–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –Ω–∞–±–æ—Ä —Å–ª–æ—ë–≤; —Ç–µ–≥ –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ digest, –Ω–æ —Ç–µ–≥ —Å–∞–º –ø–æ —Å–µ–±–µ –∏–∑–º–µ–Ω—è–µ–º (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ç–µ–≥ –Ω–∞ –¥—Ä—É–≥–æ–π digest).


### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è (—à–∞–≥–∏ –∏ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤–∏–¥–µ–æ)
–ü—Ä–µ–¥–ª–æ–∂—É –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Å –Ω–∞–±–æ—Ä–æ–º –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ä–æ—à–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤ –≤–∏–¥–µ–æ:

1. –°–∫–∞—á–∏–≤–∞–µ–º –æ–±—Ä–∞–∑ –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```shell
docker pull nginx:alpine

docker run --name demo-nginx -d -p 8080:80 nginx:alpine
```

–ü–æ–∫–∞–∂–∏ docker ps, –∑–∞–π–¥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ localhost:8080 (–∏–ª–∏ –ø–æ–∫–∞–∂–∏ curl):
```shell
curl http://localhost:8080
```

2. –ò—Å—Å–ª–µ–¥—É–µ–º –æ–±—Ä–∞–∑ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```shell
docker images
docker inspect demo-nginx
docker logs demo-nginx
docker exec -it demo-nginx sh
```

3. –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–ª–æ—ë–≤:
```shell
docker history nginx:alpine
```
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–ª–æ–∏ –æ–±—Ä–∞–∑–∞, –≤ —Ç–æ–º –≤–∏–¥–µ, –∫–∞–∫ –æ–Ω–∏ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –∫–æ–º–∞–Ω–¥–∞–º–∏ Dockerfile.

–ò —Ç—ã —É–≤–∏–¥–µ–ª –ø—Ä–∏–º–µ—Ä–Ω–æ 20 —Å–ª–æ—ë–≤.

–≠—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ: –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ nginx ‚Äî —Å–ª–æ–∂–Ω—ã–π, —Å –∫—É—á–µ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π.

**–ö–∞–∫ —á–∏—Ç–∞—Ç—å –≤—ã–≤–æ–¥ docker history**
```shell
b3c656d55d7a   3 weeks ago   RUN /bin/sh -c ...   42.6MB
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:

- b3c656d55d7a ‚Äî ID —Å–ª–æ—è (hash)
- 3 weeks ago ‚Äî –∫–æ–≥–¥–∞ —Å–ª–æ–π –±—ã–ª —Å–æ–∑–¥–∞–Ω
- RUN /bin/sh -c ‚Ä¶ ‚Äî –∫–∞–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞–ª–∞ —Å–ª–æ–π –≤ Dockerfile (RUN, COPY, CMD, ENV –∏ —Ç.–¥.)
- 42.6MB ‚Äî —Ä–∞–∑–º–µ—Ä —Å–ª–æ—è

4. –°–æ–±–∏—Ä–∞–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑:
- –°–æ–∑–¥–∞–π —Å–≤–æ–π Dockerfile:
```dockerfile
FROM alpine:3.18

RUN echo "Hello from Docker!" > /hello.txt

CMD ["cat", "/hello.txt"]

```

–°–æ–±–µ—Ä–∏:
```shell
docker build -t mytest:1.0 .
```

–ó–∞–ø—É—Å—Ç–∏:
```shell
docker run mytest:1.0
```

–ü–æ—Å–º–æ—Ç—Ä–∏ –∏—Å—Ç–æ—Ä–∏—é:
```shell
docker history mytest:1.0
```

–¢—ã —É–≤–∏–¥–∏—à—å, —á—Ç–æ Dockerfile –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª—Å—è –≤ 2‚Äì3 —Å–ª–æ—è:
- —Å–ª–æ–π Alpine
- —Å–ª–æ–π RUN echo ...
- —Å–ª–æ–π —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π CMD (–≤–µ—Å 0B)

–¢–∞–∫ —Ç—ã –ø–æ–π–º—ë—à—å —Å–≤—è–∑—å:
**–∫–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ Dockerfile ‚Üí –Ω–æ–≤—ã–π —Å–ª–æ–π.**


5. –°–æ–±–∏—Ä–∞–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑ c –∫–æ–¥–æ–º:

–°–æ–∑–¥–∞–π:
    app.py:

```python
print("Hello from Python inside Docker!")
```

Dockerfile:
```dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY app.py .
CMD ["python", "app.py"]
```

–°–æ–±–µ—Ä–∏:
```shell
docker build -t mypython:1.0 .
```

–ó–∞–ø—É—Å—Ç–∏:
```shell
docker run mypython:1.0
```

6. –¢–µ–≥–∏ –∏ –ø—É—à –≤ —Ä–µ–µ—Å—Ç—Ä (–¥–µ–º–æ —Å Docker Hub):
```shell
docker login -u printfchamp
# –í–≤–æ–¥–∏–º –ø–∞—Ä–æ–ª—å
docker tag mytest:1.0 printfchamp/mytest:1.0
docker push printfchamp/mytest:1.0
```
‚úîÔ∏è —Å–æ–∑–¥–∞–ª —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑
‚úîÔ∏è –ø–æ–º–µ—Ç–∏–ª –µ–≥–æ —Ç–µ–≥–æ–º (tag)
‚úîÔ∏è –∑–∞–≥—Ä—É–∑–∏–ª –µ–≥–æ (push) –≤ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä ‚Äî Docker Hub


–ö–æ–≥–¥–∞ —Ç—ã –≤—ã–ø–æ–ª–Ω–∏–ª:
```shell
docker tag mytest:1.0 printfchamp/mytest:1.0
docker push printfchamp/mytest:1.0
```

Docker —Å–¥–µ–ª–∞–ª —Å–ª–µ–¥—É—é—â–µ–µ:

1. –í–∑—è–ª –ª–æ–∫–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ mytest:1.0

2. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª –µ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç —Ä–µ–µ—Å—Ç—Ä–∞:
```shell
docker.io/printfchamp/mytest:1.0
```

3. –†–∞–∑–¥–µ–ª–∏–ª –æ–±—Ä–∞–∑ –Ω–∞ —Å–ª–æ–∏
4. –û—Ç–ø—Ä–∞–≤–∏–ª —ç—Ç–∏ —Å–ª–æ–∏ –≤ Docker Hub, –µ—Å–ª–∏:
 - —Ç–∞–∫–æ–≥–æ —Å–ª–æ—è –Ω–µ—Ç –≤ –æ–±–ª–∞–∫–µ ‚Üí –æ–Ω "Pushed"
 - —Å–ª–æ–π —É–∂–µ –µ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —ç—Ç–æ –±–∞–∑–æ–≤—ã–π python:3.11) ‚Üí –µ–≥–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç (—ç–∫–æ–Ω–æ–º–∏—è)
5. –í –∫–æ–Ω—Ü–µ Docker Hub —Å–æ–∑–¥–∞–ª –º–∞–Ω–∏—Ñ–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–∏–µ —Å–ª–æ–∏ —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç —Ç–≤–æ–π –æ–±—Ä–∞–∑.
```shell
s.usynin‚Ä¢coding/mastering-docker/python_app(master‚ö°)¬ª docker push printfchamp/mytest:1.0
The push refers to repository [docker.io/printfchamp/mytest]
21cb32756ffa: Pushed 
69d8fe2b4477: Pushed 
44cf07d57ee4: Pushed 
1.0: digest: sha256:3fad35855e357c0682785f8dcab4e777736d84456b0b2a5ed4f7befefa97d224 size: 855
```

–ò —Ç—ã —É–≤–∏–¥–µ–ª —ç—Ç–æ:
```shell
digest: sha256:3fad35855e357c0682785f8dcab4e777736d84456b0b2a5ed4f7befefa97d224
```
–≠—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ö—ç—à —Ç–≤–æ–µ–≥–æ –æ–±—Ä–∞–∑–∞ ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—è, —á—Ç–æ –æ–Ω –Ω–µ–∏–∑–º–µ–Ω—ë–Ω.


### üéØ –ó–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–µ–Ω push –≤ Docker Hub

–£ –æ–±—Ä–∞–∑–æ–≤ –µ—Å—Ç—å —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏.

1) –•—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤ –≤–Ω–µ —Ç–≤–æ–µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞

–ï—Å–ª–∏ –Ω–æ—É—Ç–±—É–∫ —Å–ª–æ–º–∞–µ—Ç—Å—è ‚Äî –≤—Å—ë —Ä–∞–≤–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ.
> Docker Hub ‚Üí –∫–∞–∫ GitHub, –Ω–æ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤.

2) –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–∑–∞ –≥–¥–µ —É–≥–æ–¥–Ω–æ
- –¢–µ–ø–µ—Ä—å –ª—é–±–æ–π —á–µ–ª–æ–≤–µ–∫ (–∏–ª–∏ —Å–µ—Ä–≤–µ—Ä) –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å:
```shell
docker pull printfchamp/mytest:1.0
docker run printfchamp/mytest:1.0
```
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç:
- —É —Ç–µ–±—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–±–æ—Ä–∫–∏
- –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ –≤—Å–µ—Ö –º–∞—à–∏–Ω–∞—Ö


3) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ CI/CD

–†–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

1. –¢—ã –∫–æ–º–º–∏—Ç–∏—à—å –≤ GitHub
2. GitHub Actions —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑
3. –ü—É—à–∏—Ç –≤ Docker Hub
4. –°–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, VPS, Kubernetes) –¥–µ–ª–∞–µ—Ç docker pull –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π workflow.

4) –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç–≤–æ–π mytest ‚Äî —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

–ë–µ–∑ Docker:
- –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python
- –Ω—É–∂–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–∞–∫–µ—Ç–æ–≤
- –Ω—É–∂–Ω–∞—è –≤–µ—Ä—Å–∏—è system libs –∏ —Ç.–¥


–° Docker:
- –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤–æ–æ–±—â–µ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ, –∫—Ä–æ–º–µ Docker
- –≤—Å—ë —É–∂–µ –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–∑–∞

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä = –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + –µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

#### –ì–¥–µ —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–≤–æ–π –æ–±—Ä–∞–∑?
‚úîÔ∏è –õ–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –¥—Ä—É–≥–æ–π –º–∞—à–∏–Ω–µ
```shell
docker pull printfchamp/mytest:1.0
docker run printfchamp/mytest:1.0
```

‚úîÔ∏è –ù–∞ VPS / —Å–µ—Ä–≤–µ—Ä–µ

(–Ω–∞–ø—Ä–∏–º–µ—Ä, DigitalOcean –∏–ª–∏ Hetzner)
```shell
docker run -d printfchamp/mytest:1.0
```

‚úîÔ∏è –í Kubernetes

–í –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ Deployment:
```yaml
containers:
  - name: mytest
    image: printfchamp/mytest:1.0
```

‚úîÔ∏è –í Docker Compose
```yaml
services:
  app:
    image: printfchamp/mytest:1.0
```

‚úîÔ∏è –£ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π
–¢–≤–æ–π –æ–±—Ä–∞–∑ –º–æ–∂–Ω–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–∞–∫ —á–∞—Å—Ç—å –æ–±—É—á–∞—é—â–µ–≥–æ –∫—É—Ä—Å–∞.


‚ùì –•–æ—á–µ—à—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—Å—ë –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ü–æ–ø—Ä–æ–±—É–π –Ω–∞ —á–∏—Å—Ç–æ–º Alpine (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
```shell
docker pull printfchamp/mytest:1.0
docker run printfchamp/mytest:1.0
```

–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –æ–±—Ä–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω.