# üìã –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Docker


> **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å–æ–±—ã—Ç–∏—è, –æ—à–∏–±–∫–∏, debug-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è), –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

### ü§î –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –ª–æ–≥–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö?

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã ‚Äî —ç—Ç–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ:
- **–≠—Ñ–µ–º–µ—Ä–Ω—ã** ‚Äî –º–æ–≥—É—Ç –±—ã—Ç—å —É–Ω–∏—á—Ç–æ–∂–µ–Ω—ã –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω—ã –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
- **–ù–µ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Ö–æ—Å—Ç–∞** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–†–∞–±–æ—Ç–∞—é—Ç –≤ —Ñ–æ–Ω–µ** (—Ä–µ–∂–∏–º `-d`) ‚Äî –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ stdout/stderr


### üìä –û—Ç–∫—É–¥–∞ Docker –±–µ—Ä–µ—Ç –ª–æ–≥–∏?

Docker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –¥–≤–∞ –ø–æ—Ç–æ–∫–∞ –≤—ã–≤–æ–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
- **STDOUT** (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –≤—ã–≤–æ–¥–∞) ‚Äî –æ–±—ã—á–Ω—ã–π –≤—ã–≤–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **STDERR** (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—à–∏–±–æ–∫) ‚Äî –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫

```python
# –í Python
print("Hello")  # ‚Üí –ø–æ–ø–∞–¥–∞–µ—Ç –≤ STDOUT ‚Üí Docker logs
import sys
print("Error!", file=sys.stderr)  # ‚Üí –ø–æ–ø–∞–¥–∞–µ—Ç –≤ STDERR ‚Üí Docker logs
```

Docker –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–∏ –ø–æ—Ç–æ–∫–∏ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∏—Ö **logging driver** (–¥—Ä–∞–π–≤–µ—Ä—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è), –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç, –∫—É–¥–∞ –∏—Ö —Å–æ—Ö—Ä–∞–Ω—è—Ç—å.

### üéØ –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è

> –í Docker –ª–æ–≥–∏ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ñ–∞–π–ª—ã. –≠—Ç–æ **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**, –≥–¥–µ –º–æ–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å, –∫–∞–∫ —Å–æ–±–∏—Ä–∞—Ç—å, —Ö—Ä–∞–Ω–∏—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏.


## docker logs - –±–∞–∑–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```bash
docker logs [OPTIONS] CONTAINER
```

### üîç –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø—Ü–∏–∏

| –û–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-------|----------|--------|
| `-f, --follow` | –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–∫–∞–∫ `tail -f`) | `docker logs -f myapp` |
| `--tail N` | –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å—Ç—Ä–æ–∫ | `docker logs --tail 50 myapp` |
| `--since` | –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ | `docker logs --since 10m myapp` |
| `--until` | –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ | `docker logs --until 2023-12-01 myapp` |
| `-t, --timestamps` | –î–æ–±–∞–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ | `docker logs -t myapp` |


### üìù –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

#### 1. –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker logs myapp
```

–í—ã–≤–æ–¥:
```
2024-12-11T10:23:45.123456789Z Starting application...
2024-12-11T10:23:45.456789012Z Database connected
2024-12-11T10:23:46.789012345Z Server listening on port 8080
```

#### 2. –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
docker logs -f myapp
```

–ü–æ—Ö–æ–∂–µ –Ω–∞ `tail -f` ‚Äî –ª–æ–≥–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–µ–±–∞–≥–∞.


**üí° –°–æ–≤–µ—Ç**: –ù–∞–∂–º–∏ `Ctrl+C`, —á—Ç–æ–±—ã –≤—ã–π—Ç–∏ –∏–∑ —Ä–µ–∂–∏–º–∞ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.


#### 3. –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
```bash
docker logs --tail 100 myapp
```
–ü–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ –ª–æ–≥–æ–≤ –º–Ω–æ–≥–æ, –∞ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è.



#### 4. –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç

```bash
docker logs --since 10m myapp
```

–§–æ—Ä–º–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:
- `10s` ‚Äî 10 —Å–µ–∫—É–Ω–¥
- `5m` ‚Äî 5 –º–∏–Ω—É—Ç
- `2h` ‚Äî 2 —á–∞—Å–∞
- `1d` ‚Äî 1 –¥–µ–Ω—å
- `2024-12-11T10:00:00` ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–∞—Ç–∞/–≤—Ä–µ–º—è


#### 5. –õ–æ–≥–∏ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏

```bash
docker logs -t myapp
```

–í—ã–≤–æ–¥:
```
2024-12-11T10:23:45.123456789Z Starting application...
2024-12-11T10:23:45.456789012Z Database connected
```

#### 6. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ü–∏–π

```bash
docker logs -f --tail 50 -t myapp
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –∏ —Å–ª–µ–¥–∏—Ç –∑–∞ –Ω–æ–≤—ã–º–∏ –ª–æ–≥–∞–º–∏.


### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**
   - –ï—Å–ª–∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (`docker rm`) ‚Äî –ª–æ–≥–∏ —Ç–µ—Ä—è—é—Ç—Å—è
   - –ï—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (`docker stop`) ‚Äî –ª–æ–≥–∏ –æ—Å—Ç–∞—é—Ç—Å—è

2. **docker logs —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏**
   - –†–∞–±–æ—Ç–∞–µ—Ç: `json-file`, `local`
   - –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: `syslog`, `journald`, `gelf` –∏ –¥—Ä—É–≥–∏–µ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã

3. **–õ–æ–≥–∏ –º–æ–≥—É—Ç –∑–∞–Ω–∏–º–∞—Ç—å –º–Ω–æ–≥–æ –º–µ—Å—Ç–∞**
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä
   - –ú–æ–≥—É—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∏—Å–∫ —Ö–æ—Å—Ç–∞!

## –î—Ä–∞–π–≤–µ—Ä—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

> **Logging driver (–¥—Ä–∞–π–≤–µ—Ä –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)** ‚Äî —ç—Ç–æ –ø–ª–∞–≥–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫—É–¥–∞ –∏ –∫–∞–∫ Docker –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

### üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?
```
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä (STDOUT/STDERR) 
    ‚Üì
Docker Engine –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–≤–æ–¥
    ‚Üì
–ü–µ—Ä–µ–¥–∞–µ—Ç –≤ Logging Driver
    ‚Üì
–î—Ä–∞–π–≤–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç/–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏
```

### üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã

| –î—Ä–∞–π–≤–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|---------|----------|-------------------|
| **json-file** | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ JSON-—Ñ–∞–π–ª—ã –Ω–∞ —Ö–æ—Å—Ç–µ | –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –ø—Ä–æ—Å—Ç—ã–µ –¥–µ–ø–ª–æ–∏ |
| **local** | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π | –ü—Ä–æ–¥–∞–∫—à–Ω –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ |
| **syslog** | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π syslog | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º |
| **journald** | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ systemd journal | Linux —Å systemd |
| **gelf** | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Graylog/Logstash | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **fluentd** | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Fluentd | –°–ª–æ–∂–Ω—ã–µ pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–æ–≤ |
| **awslogs** | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Amazon CloudWatch | AWS-–æ–∫—Ä—É–∂–µ–Ω–∏–µ |
| **splunk** | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Splunk | Enterprise –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| **none** | –û—Ç–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –ª–æ–≥–∏ –Ω–µ –Ω—É–∂–Ω—ã |


### üîç –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–∏–π –¥—Ä–∞–π–≤–µ—Ä?

```bash
docker info | grep "Logging Driver"
```

–ò–ª–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
docker inspect myapp | grep LogConfig -A 10
```


## 1. json-file (–¥—Ä–∞–π–≤–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### –ß—Ç–æ —ç—Ç–æ?

–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª–æ–≥–∏ –≤ JSON-—Ñ–æ—Ä–º–∞—Ç –≤ —Ñ–∞–π–ª—ã –Ω–∞ —Ö–æ—Å—Ç–µ.

### üìÇ –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–≥–∏?

```bash
/var/lib/docker/containers/<container-id>/<container-id>-json.log
```

–ù–∞–ø—Ä–∏–º–µ—Ä:
```bash
/var/lib/docker/containers/abc123.../abc123...-json.log
```

### üìù –§–æ—Ä–º–∞—Ç –ª–æ–≥–∞

```json
{"log":"Starting application...\n","stream":"stdout","time":"2024-12-11T10:23:45.123456789Z"}
{"log":"Error occurred!\n","stream":"stderr","time":"2024-12-11T10:23:46.456789012Z"}
```

–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî —ç—Ç–æ JSON-–æ–±—ä–µ–∫—Ç —Å:
- `log` ‚Äî —Å–∞–º–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `stream` ‚Äî –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–æ (`stdout` –∏–ª–∏ `stderr`)
- `time` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞


### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ json-file

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ª–æ–≥–∏ —Ä–∞—Å—Ç—É—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –∏ –º–æ–≥—É—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∏—Å–∫.

**–†–µ—à–µ–Ω–∏–µ**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –æ–ø—Ü–∏–∏:

```bash
docker run -d \
  --log-driver json-file \
  --log-opt max-size=10m \
  --log-opt max-file=3 \
  nginx
```

| –û–ø—Ü–∏—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `max-size` | `10m` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –ª–æ–≥-—Ñ–∞–π–ª–∞ (10 –º–µ–≥–∞–±–∞–π—Ç) |
| `max-file` | `3` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏ (3 —Ñ–∞–π–ª–∞) |

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

1. Docker –ø–∏—à–µ—Ç –≤ `container-id-json.log`
2. –ö–æ–≥–¥–∞ —Ñ–∞–π–ª –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 10 –ú–ë:
   - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç –≤ `container-id-json.log.1`
   - –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π `container-id-json.log`
3. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π —Ä–æ—Ç–∞—Ü–∏–∏:
   - `.log.1` ‚Üí `.log.2`
   - `.log` ‚Üí `.log.1`
   - –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π `.log`
4. –ö–æ–≥–¥–∞ —Ñ–∞–π–ª–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ 3 ‚Äî —Å—Ç–∞—Ä–µ–π—à–∏–π —É–¥–∞–ª—è–µ—Ç—Å—è

**–ò—Ç–æ–≥–æ**: –º–∞–∫—Å–∏–º—É–º 3 √ó 10 –ú–ë = 30 –ú–ë –ª–æ–≥–æ–≤ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.


### üåç –ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–í–º–µ—Å—Ç–æ —É–∫–∞–∑–∞–Ω–∏—è –æ–ø—Ü–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

**–§–∞–π–ª**: `/etc/docker/daemon.json`

```json
{
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "10m",
    "max-file": "3"
  }
}
```



**–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è**:

```bash
sudo systemctl restart docker
```

–¢–µ–ø–µ—Ä—å –≤—Å–µ –Ω–æ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

### ‚úÖ –ü–ª—é—Å—ã json-file

- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å `docker logs`
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (JSON)

### ‚ùå –ú–∏–Ω—É—Å—ã json-file

- ‚ùå –õ–æ–≥–∏ –Ω–∞ —Ö–æ—Å—Ç–µ ‚Äî –º–æ–∂–µ—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è –º–µ—Å—Ç–æ
- ‚ùå –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äî –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ö—Ä–∞–Ω–∏—Ç —Å–≤–æ–∏ –ª–æ–≥–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚ùå –ë–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—Ç–∞—Ü–∏–∏ ‚Äî –º–æ–∂–µ—Ç –∑–∞–±–∏—Ç—å –¥–∏—Å–∫

---


## 2. local (—É–ª—É—á—à–µ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä)

### –ß—Ç–æ —ç—Ç–æ?

–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π.

### üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ json-file

- **–ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** ‚Äî —Å–∂–∞—Ç–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è** ‚Äî –≤–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –¥–∏—Å–∫** ‚Äî –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏

### ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
docker run -d \
  --log-driver local \
  --log-opt max-size=10m \
  --log-opt max-file=5 \
  nginx
```

### üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

> –ò—Å–ø–æ–ª—å–∑—É–π `local` –≤–º–µ—Å—Ç–æ `json-file` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ.



## 3. syslog (—Å–∏—Å—Ç–µ–º–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

### –ß—Ç–æ —ç—Ç–æ?

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π **syslog** –¥–µ–º–æ–Ω (Linux-—Å—Ç–∞–Ω–¥–∞—Ä—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è).

### üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Üí Docker Engine ‚Üí syslog ‚Üí /var/log/syslog (–∏–ª–∏ —É–¥–∞–ª–µ–Ω–Ω—ã–π syslog-—Å–µ—Ä–≤–µ—Ä)
```

### ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –õ–æ–∫–∞–ª—å–Ω—ã–π syslog

```bash
docker run -d \
  --log-driver syslog \
  --log-opt syslog-address=unix:///dev/log \
  nginx
```

–õ–æ–≥–∏ –ø–æ–ø–∞–¥—É—Ç –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ª–æ–≥ (–æ–±—ã—á–Ω–æ `/var/log/syslog` –∏–ª–∏ `/var/log/messages`).

#### –£–¥–∞–ª–µ–Ω–Ω—ã–π syslog-—Å–µ—Ä–≤–µ—Ä

```bash
docker run -d \
  --log-driver syslog \
  --log-opt syslog-address=tcp://192.168.1.100:514 \
  --log-opt tag="myapp" \
  nginx
```

–õ–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å IP `192.168.1.100`.

### üìù –û–ø—Ü–∏–∏ syslog

| –û–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-------|----------|--------|
| `syslog-address` | –ê–¥—Ä–µ—Å syslog-—Å–µ—Ä–≤–µ—Ä–∞ | `tcp://host:port`, `udp://host:port`, `unix:///path` |
| `tag` | –¢–µ–≥ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ | `myapp-prod` |
| `syslog-facility` | –ö–∞—Ç–µ–≥–æ—Ä–∏—è syslog | `daemon`, `local0`...`local7` |

### ‚úÖ –ü–ª—é—Å—ã syslog

- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –≤ Linux
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–æ–≤ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### ‚ùå –ú–∏–Ω—É—Å—ã syslog

- ‚ùå `docker logs` **–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** (–ª–æ–≥–∏ —É—Ö–æ–¥—è—Ç –≤ syslog)
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ syslog-—Å–µ—Ä–≤–µ—Ä–∞
- ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è –ª–æ–≥–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ (–µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è)

---


## 4. journald (systemd-–∂—É—Ä–Ω–∞–ª)

### –ß—Ç–æ —ç—Ç–æ?

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ –≤ **systemd journal** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è systemd-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤ (Ubuntu 16.04+, CentOS 7+, Fedora –∏ –¥—Ä.).

### üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Üí Docker Engine ‚Üí journald ‚Üí systemd journal
```

### ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
docker run -d \
  --log-driver journald \
  nginx
```

### üìù –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ journalctl

–õ–æ–≥–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ systemd journal, –ø–æ—ç—Ç–æ–º—É `docker logs` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π `journalctl`:

```bash
# –í—Å–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
journalctl CONTAINER_NAME=myapp

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -f CONTAINER_NAME=myapp

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
journalctl --since "1 hour ago" CONTAINER_NAME=myapp
```

### üîç –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ journald

journald –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:
- **CONTAINER_NAME** ‚Äî –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **CONTAINER_ID** ‚Äî ID –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **CONTAINER_TAG** ‚Äî —Ç–µ–≥ –æ–±—Ä–∞–∑–∞
- **CONTAINER_PARTIAL_MESSAGE** ‚Äî –µ—Å–ª–∏ –ª–æ–≥ —Ä–∞–∑–±–∏—Ç –Ω–∞ —á–∞—Å—Ç–∏

### ‚úÖ –ü–ª—é—Å—ã journald

- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å systemd (–º–æ—â–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–æ–≤ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è
- ‚úÖ –°–∂–∞—Ç–∏–µ –ª–æ–≥–æ–≤
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

### ‚ùå –ú–∏–Ω—É—Å—ã journald

- ‚ùå `docker logs` **–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
- ‚ùå –¢–æ–ª—å–∫–æ –¥–ª—è systemd-—Å–∏—Å—Ç–µ–º
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏—è `journalctl`

### üìù –ü—Ä–∏–º–µ—Ä: –ó–∞–ø—É—Å–∫ Nginx —Å journald

```bash
docker run -d \
  --name nginx-prod \
  --log-driver journald \
  --log-opt tag="nginx-prod" \
  nginx
```

–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:

```bash
journalctl CONTAINER_NAME=nginx-prod -f
```

## –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

### ü§î –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤?

> **–†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤** ‚Äî —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–º –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ª–æ–≥-—Ñ–∞–π–ª–æ–≤, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –∑–∞–ø–æ–ª–Ω–∏–ª–∏ –≤–µ—Å—å –¥–∏—Å–∫.


### üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–æ—Ç–∞—Ü–∏—è?

```
–ª–æ–≥-—Ñ–∞–π–ª —Ä–∞—Å—Ç–µ—Ç ‚Üí –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ª–∏–º–∏—Ç–∞ ‚Üí –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π ‚Üí —Å—Ç–∞—Ä—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è
```


### üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –¥–ª—è json-file –∏ local

–†–æ—Ç–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥–≤—É–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|----------|--------|
| `max-size` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –ª–æ–≥-—Ñ–∞–π–ª–∞ | `10m`, `100m`, `1g` |
| `max-file` | –°–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—å | `3`, `5`, `10` |


### üìù –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### –î–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker run -d \
  --name myapp \
  --log-driver json-file \
  --log-opt max-size=50m \
  --log-opt max-file=5 \
  nginx
```

**–ò—Ç–æ–≥**: –ú–∞–∫—Å–∏–º—É–º 5 —Ñ–∞–π–ª–æ–≤ √ó 50 –ú–ë = **250 –ú–ë –ª–æ–≥–æ–≤**.


#### –ì–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

**–§–∞–π–ª**: `/etc/docker/daemon.json`

```json
{
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "20m",
    "max-file": "3"
  }
}



### üìä –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏?

–ü—Ä–∏–º–µ—Ä —Å `max-size=10m` –∏ `max-file=3`:

**–®–∞–≥ 1**: –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ —Ñ–∞–π–ª
```
container-id-json.log  (8 –ú–ë)
```

**–®–∞–≥ 2**: –§–∞–π–ª –¥–æ—Å—Ç–∏–≥ 10 –ú–ë ‚Äî —Ä–æ—Ç–∞—Ü–∏—è
```
container-id-json.log     (–Ω–æ–≤—ã–π, –ø—É—Å—Ç–æ–π)
container-id-json.log.1   (10 –ú–ë, —Å—Ç–∞—Ä—ã–π)
```

**–®–∞–≥ 3**: –ï—â–µ –æ–¥–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è
```
container-id-json.log     (–Ω–æ–≤—ã–π, –ø—É—Å—Ç–æ–π)
container-id-json.log.1   (10 –ú–ë)
container-id-json.log.2   (10 –ú–ë, —Å–∞–º—ã–π —Å—Ç–∞—Ä—ã–π)
```

**–®–∞–≥ 4**: –¢—Ä–µ—Ç—å—è —Ä–æ—Ç–∞—Ü–∏—è ‚Äî —Å—Ç–∞—Ä–µ–π—à–∏–π —É–¥–∞–ª—è–µ—Ç—Å—è
```
container-id-json.log     (–Ω–æ–≤—ã–π, –ø—É—Å—Ç–æ–π)
container-id-json.log.1   (10 –ú–ë)
container-id-json.log.2   (10 –ú–ë)
# container-id-json.log.3 –±—ã–ª –±—ã —Å–æ–∑–¥–∞–Ω, –Ω–æ max-file=3, –ø–æ—ç—Ç–æ–º—É —Å—Ç–∞—Ä–µ–π—à–∏–π —É–¥–∞–ª—ë–Ω
```

### ‚öôÔ∏è –†–æ—Ç–∞—Ü–∏—è –¥–ª—è journald

journald —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–æ—Ç–∞—Ü–∏–µ–π **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

**–§–∞–π–ª**: `/etc/systemd/journald.conf`

```ini
[Journal]
SystemMaxUse=500M      # –ú–∞–∫—Å–∏–º—É–º –º–µ—Å—Ç–∞ –¥–ª—è –ª–æ–≥–æ–≤
SystemMaxFileSize=50M  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
MaxRetentionSec=1week  # –•—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –Ω–µ –¥–æ–ª—å—à–µ –Ω–µ–¥–µ–ª–∏
```

**–ü—Ä–∏–º–µ–Ω–∏—Ç—å**:

```bash
sudo systemctl restart systemd-journald
```

### üìù Best Practices –ø–æ —Ä–æ—Ç–∞—Ü–∏–∏

1. **–í—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π –ª–∏–º–∏—Ç—ã**
   - –ë–µ–∑ –ª–∏–º–∏—Ç–æ–≤ –ª–æ–≥–∏ –º–æ–≥—É—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤–µ—Å—å –¥–∏—Å–∫
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: `max-size=20m`, `max-file=3`

2. **–£—á–∏—Ç—ã–≤–∞–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**
   - –ï—Å–ª–∏ —É —Ç–µ–±—è 50 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ √ó 60 –ú–ë = **3 –ì–ë —Ç–æ–ª—å–∫–æ –Ω–∞ –ª–æ–≥–∏**
   - –ü–ª–∞–Ω–∏—Ä—É–π –º–µ—Å—Ç–æ –∑–∞—Ä–∞–Ω–µ–µ

3. **–ò—Å–ø–æ–ª—å–∑—É–π —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**
   - –í–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–π –≤ Graylog, ELK, CloudWatch
   - –õ–æ–≥–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤



## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–µ–±–∞–≥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ó–∞–¥–∞—á–∞**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π, –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –ø–æ—á–µ–º—É.

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker run -d --name myapp myimage

# –°–ª–µ–¥–∏–º –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f myapp

# –ï—Å–ª–∏ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
docker logs -f --tail 50 myapp
```


### üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–æ–≤ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

**–ó–∞–¥–∞—á–∞**: –ó–∞–ø—É—Å—Ç–∏—Ç—å Nginx —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –ª–æ–≥–æ–≤ (–º–∞–∫—Å–∏–º—É–º 100 –ú–ë).

```bash
docker run -d \
  --name nginx-prod \
  --log-driver json-file \
  --log-opt max-size=20m \
  --log-opt max-file=5 \
  -p 80:80 \
  nginx
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–∞–∫—Å–∏–º—É–º 5 √ó 20 –ú–ë = 100 –ú–ë –ª–æ–≥–æ–≤.

### üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –≤ —É–¥–∞–ª–µ–Ω–Ω—ã–π syslog

**–ó–∞–¥–∞—á–∞**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

```bash
docker run -d \
  --name myapp \
  --log-driver syslog \
  --log-opt syslog-address=tcp://logs.company.com:514 \
  --log-opt tag="myapp-prod" \
  myimage
```

**–ù–∞ syslog-—Å–µ—Ä–≤–µ—Ä–µ** –ª–æ–≥–∏ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Å —Ç–µ–≥–æ–º `myapp-prod`.



### üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ journald –≤ systemd-–æ–∫—Ä—É–∂–µ–Ω–∏–∏

**–ó–∞–¥–∞—á–∞**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å systemd journal.

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å journald
docker run -d \
  --name webapp \
  --log-driver journald \
  --log-opt tag="webapp-prod" \
  webapp:latest

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ journalctl
journalctl CONTAINER_NAME=webapp -f

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –º–∏–Ω—É—Ç
journalctl CONTAINER_NAME=webapp --since "30 minutes ago"

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É (—Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏)
journalctl CONTAINER_NAME=webapp -p err
```

### üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 5: Docker Compose —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ª–æ–≥–æ–≤

**–§–∞–π–ª**: `docker-compose.yml`

```yaml
version: '3.8'

services:
  web:
    image: nginx
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
  
  app:
    image: myapp
    logging:
      driver: "journald"
      options:
        tag: "myapp-prod"
  
  db:
    image: postgres
    logging:
      driver: "local"
      options:
        max-size: "50m"
        max-file: "5"
```

**–ó–∞–ø—É—Å–∫**:

```bash
docker-compose up -d
```


### üéØ –°—Ü–µ–Ω–∞—Ä–∏–π 6: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–ó–∞–¥–∞—á–∞**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω—É–∂–Ω—ã.

```bash
docker run -d \
  --name noisy-app \
  --log-driver none \
  myimage
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: `docker logs` –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!



## Best Practices

### 1. ‚úÖ –í—Å–µ–≥–¥–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤

**–ü–ª–æ—Ö–æ**:
```bash
docker run -d nginx  # –õ–æ–≥–∏ —Ä–∞—Å—Ç—É—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ!
```

**–•–æ—Ä–æ—à–æ**:
```bash
docker run -d \
  --log-opt max-size=20m \
  --log-opt max-file=3 \
  nginx
```

### 2. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (JSON)

**–ü–ª–æ—Ö–æ** (plain text):
```python
print("User logged in: john, IP: 192.168.1.1")
```

**–•–æ—Ä–æ—à–æ** (JSON):
```python
import json
print(json.dumps({
    "event": "user_login",
    "user": "john",
    "ip": "192.168.1.1",
    "timestamp": "2024-12-11T10:23:45Z"
}))
```

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –ª–µ–≥—á–µ –ø–∞—Ä—Å–∏—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å.

### 3. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Ç–µ–≥–∏ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```bash
docker run -d \
  --log-opt tag="{{.Name}}/{{.ID}}" \
  nginx
```

–¢–µ–≥–∏ –ø–æ–º–æ–≥–∞—é—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å –ª–æ–≥–∏ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.

### 4. ‚úÖ –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–µ —Ö—Ä–∞–Ω–∏ –ª–æ–≥–∏ –ª–æ–∫–∞–ª—å–Ω–æ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π:
- **Graylog** (GELF driver)
- **ELK Stack** (Fluentd driver)
- **CloudWatch** (awslogs driver)
- **Splunk** (splunk driver)

**–ü—Ä–∏–º–µ—Ä —Å Fluentd**:

```bash
docker run -d \
  --log-driver fluentd \
  --log-opt fluentd-address=fluentd.company.com:24224 \
  --log-opt tag="docker.myapp" \
  myapp
```

### 5. ‚úÖ –õ–æ–≥–∏—Ä—É–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∞ –Ω–µ Docker

–î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- Python: `logging`, `structlog`
- Node.js: `winston`, `pino`
- Go: `logrus`, `zap`


–ò –æ—Ç–ø—Ä–∞–≤–ª—è–π –ª–æ–≥–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É.

### 6. ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä—å, —Å–∫–æ–ª—å–∫–æ –º–µ—Å—Ç–∞ –∑–∞–Ω–∏–º–∞—é—Ç –ª–æ–≥–∏
docker system df -v

# –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker inspect --format='{{.LogPath}}' myapp | xargs du -h
```

### 7. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π labels –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

```bash
docker run -d \
  --label environment=production \
  --label app=web \
  --log-opt labels=environment,app \
  nginx
```

–ú–µ—Ç–∫–∏ –ø–æ–ø–∞–¥—É—Ç –≤ –ª–æ–≥–∏ –∏ –ø–æ–º–æ–≥—É—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏—Ö.

### 8. ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π bind mount –¥–ª—è –ª–æ–≥–æ–≤

**–ü–ª–æ—Ö–æ**:
```bash
docker run -v /host/logs:/var/log/nginx nginx
```

–≠—Ç–æ –æ–±—Ö–æ–¥–∏—Ç —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è Docker –∏ —É—Å–ª–æ–∂–Ω—è–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.

**–•–æ—Ä–æ—à–æ**: –ò—Å–ø–æ–ª—å–∑—É–π stdout/stderr + Docker logging drivers.

---


## üé¨ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –≤–∏–¥–µ–æ

### –®–∞–≥ 1: –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º Nginx
docker run -d --name demo-nginx nginx

# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
docker logs demo-nginx

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç—Ä–∞—Ñ–∏–∫
curl http://localhost:80

# –°–º–æ—Ç—Ä–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ª–æ–≥–∏
docker logs --tail 10 demo-nginx

# –°–ª–µ–¥–∏–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f demo-nginx
```


### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏

```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏ —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker rm -f demo-nginx

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
docker run -d \
  --name demo-nginx \
  --log-opt max-size=1m \
  --log-opt max-file=3 \
  -p 80:80 \
  nginx

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å –∫ –ª–æ–≥–∞–º
docker inspect --format='{{.LogPath}}' demo-nginx

# –°–º–æ—Ç—Ä–∏–º —Ä–∞–∑–º–µ—Ä –ª–æ–≥-—Ñ–∞–π–ª–∞
docker inspect --format='{{.LogPath}}' demo-nginx | xargs ls -lh
```


### –®–∞–≥ 3: –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏

```bash
# journald (—Ç–æ–ª—å–∫–æ –¥–ª—è Linux —Å systemd)
docker run -d \
  --name demo-journald \
  --log-driver journald \
  nginx

# –°–º–æ—Ç—Ä–∏–º —á–µ—Ä–µ–∑ journalctl
journalctl CONTAINER_NAME=demo-journald -f

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤
docker run -d \
  --name demo-nologs \
  --log-driver none \
  nginx

# docker logs –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
docker logs demo-nologs  # ‚ùå Error: no logs available
```


### –®–∞–≥ 4: –ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º /etc/docker/daemon.json
sudo nano /etc/docker/daemon.json
```

–î–æ–±–∞–≤–ª—è–µ–º:
```json
{
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "10m",
    "max-file": "3"
  }
}
```

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Docker
sudo systemctl restart docker

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
docker info | grep "Logging Driver"
```
