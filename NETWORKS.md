# üåê Docker Networks (–°–µ—Ç–∏ Docker)

> **Docker Network** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º –æ–±—â–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π, —Å —Ö–æ—Å—Ç–æ–º –∏ —Å –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Docker —Å–æ–∑–¥–∞—ë—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å–µ—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∏–∑–æ–ª–∏—Ä—É—è –µ–≥–æ –æ—Ç –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Å–µ—Ç–∏ –≤ Docker?


1. **–ò–∑–æ–ª—è—Ü–∏—è** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. **–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã —É–º–µ—Ç—å –æ–±—â–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö)
3. **DNS** ‚Äî Docker –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DNS –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî —Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—à—å, –∫–∞–∫–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞
5. **–ì–∏–±–∫–æ—Å—Ç—å** ‚Äî –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ —Å–µ—Ç–µ–π


## üèóÔ∏è –¢–∏–ø—ã —Å–µ—Ç–µ–π –≤ Docker

Docker –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ —Å–µ—Ç–µ–≤—ã—Ö –¥—Ä–∞–π–≤–µ—Ä–æ–≤:

| –¢–∏–ø —Å–µ—Ç–∏ | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|----------|----------|-------------------|
| **bridge** | –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –Ω–∞ —Ö–æ—Å—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ –¥–æ–ª–∂–Ω—ã –æ–±—â–∞—Ç—å—Å—è |
| **host** | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç—å —Ö–æ—Å—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é | –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ |
| **none** | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑ —Å–µ—Ç–∏ | –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è, –Ω–µ—Ç —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ |
| **overlay** | –°–µ—Ç—å –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ Docker —Ö–æ—Å—Ç–∞–º–∏ | Docker Swarm, Kubernetes, –º—É–ª—å—Ç–∏—Ö–æ—Å—Ç |
| **macvlan** | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç MAC-–∞–¥—Ä–µ—Å –∫–∞–∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | Legacy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç—Ä–µ–±—É—é—â–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è –≤ —Å–µ—Ç–∏ |


## 1Ô∏è‚É£ Bridge Network (–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**Bridge** ‚Äî —ç—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä (software bridge), –∫–æ—Ç–æ—Ä—ã–π Docker —Å–æ–∑–¥–∞—ë—Ç –Ω–∞ —Ö–æ—Å—Ç–µ.

- –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π IP-–∞–¥—Ä–µ—Å –≤ —ç—Ç–æ–π —Å–µ—Ç–∏
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –æ–¥–Ω–æ–π bridge-—Å–µ—Ç–∏ –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–µ—Ç–µ–π

### üìä –ö–∞–∫ —ç—Ç–æ —É—Å—Ç—Ä–æ–µ–Ω–æ?
‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏  
‚úÖ –ö–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –æ–±—â–∞—Ç—å—Å—è –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ  
‚úÖ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –∏–∑–æ–ª—è—Ü–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ 

### üîß –ü—Ä–∞–∫—Ç–∏–∫–∞: —Ä–∞–±–æ—Ç–∞ —Å bridge —Å–µ—Ç—è–º–∏

#### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ç–µ–π
```shell
docker network ls
```

NETWORK ID     NAME      DRIVER    SCOPE
f7ab26d71dce   bridge    bridge    local
9f904ee27bf5   host      host      local
7fca4eb8c647   none      null      local –î–∏–∞–ø–∞–∑–æ–Ω IP-–∞–¥—Ä–µ—Å–æ–≤ (–æ–±—ã—á–Ω–æ `172.17.0.0/16`)
- Gateway (–æ–±—ã—á–Ω–æ `172.17.0.1`)


#### –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π bridge —Å–µ—Ç–∏
```shell
docker network create myapp-network
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```shell
docker network ls
```

–¢–µ–ø–µ—Ä—å —É–≤–∏–¥–∏—à—å `myapp-network` —Å –¥—Ä–∞–π–≤–µ—Ä–æ–º `bridge`.


#### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —ç—Ç–æ–π —Å–µ—Ç–∏
–ó–∞–ø—É—Å–∫–∞–µ–º –ë–î:
```shell
docker run -d --name mydb --network myapp-network \
  -e POSTGRES_PASSWORD=secret postgres:15
```

# –ó–∞–ø—É—Å–∫–∞–µ–º –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```shell
docker run -d --name webapp --network myapp-network \
  -p 8080:80 nginx:alpine
```

**–í–∞–∂–Ω–æ!** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø–æ –∏–º–µ–Ω–∏.


#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

##### –ó–∞–π–¥—ë–º –≤ webapp –∏ –ø–∏–Ω–≥—É–µ–º mydb
```shell
docker exec -it webapp sh
ping mydb  # –†–∞–±–æ—Ç–∞–µ—Ç! Docker DNS —Ä–µ–∑–æ–ª–≤–∏—Ç –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ:
docker exec webapp ping -c 3 mydb
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
```shell
docker exec webapp nslookup mydb
```
–í—ã–≤–æ–¥ –ø–æ–∫–∞–∂–µ—Ç, —á—Ç–æ `mydb` —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –≤ IP-–∞–¥—Ä–µ—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ë–î.



## 2Ô∏è‚É£ Host Network

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ **host** —Å–µ—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä **–Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ —Ö–æ—Å—Ç–∞**.


- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π IP ‚Äî –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç IP —Ö–æ—Å—Ç–∞
- –ü–æ—Ä—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞–ø—Ä—è–º—É—é –æ—Ç–∫—Ä—ã—Ç—ã –Ω–∞ —Ö–æ—Å—Ç–µ (–±–µ–∑ `-p`)
- **–ù–µ—Ç —Å–µ—Ç–µ–≤–æ–π –∏–∑–æ–ª—è—Ü–∏–∏**

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∂–µ –µ—Å—Ç—å 3 —Å–µ—Ç–∏: bridge, host, none.


–ò–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏
docker network inspect bridge

‚úÖ –ù—É–∂–Ω–∞ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ NAT)  
‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω —Å–ª—É—à–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö —Ö–æ—Å—Ç–∞  
‚úÖ Legacy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ–∂–∏–¥–∞—é—â–∏–µ –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ç–∏ —Ö–æ—Å—Ç–∞  


‚ö†Ô∏è **–ú–∏–Ω—É—Å—ã:**
- –ù–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤
- –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 80, —Ç—ã –Ω–µ –º–æ–∂–µ—à—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ —Ç–æ–º –∂–µ –ø–æ—Ä—Ç—É



### üîß –ü—Ä–∞–∫—Ç–∏–∫–∞

# –ó–∞–ø—É—Å–∫ nginx —Å host —Å–µ—Ç—å—é
docker run -d --name nginx-host --network host nginx:alpine

–¢–µ–ø–µ—Ä—å nginx –¥–æ—Å—Ç—É–ø–µ–Ω **–Ω–∞–ø—Ä—è–º—É—é** –Ω–∞ –ø–æ—Ä—Ç—É 80 —Ö–æ—Å—Ç–∞ (–±–µ–∑ `-p 8080:80`).

–ü—Ä–æ–≤–µ—Ä–∫–∞:
curl http://localhost:80

**–í–∞–∂–Ω–æ:** –ù–∞ macOS –∏ Windows `host` network —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–∞—á–µ –∏–∑-–∑–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ Docker Desktop.


## 3Ô∏è‚É£ None Network

**None** ‚Äî –ø–æ–ª–Ω–∞—è —Å–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è.

- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä **–Ω–µ –∏–º–µ–µ—Ç —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞** (–∫—Ä–æ–º–µ loopback)
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ù–µ–ª—å–∑—è –æ–±—â–∞—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

### üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞  
‚úÖ Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–≥–¥–µ –Ω–µ –Ω—É–∂–Ω–∞ —Å–µ—Ç—å)  
‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  

### üîß –ü—Ä–∞–∫—Ç–∏–∫–∞
```shell
docker run -it --name isolated --network none alpine sh–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
ip a
```

# –£–≤–∏–¥–∏—à—å —Ç–æ–ª—å–∫–æ loopback (127.0.0.1)
ping google.com # ping: bad address 'google.com'---


## 4Ô∏è‚É£ Overlay Network (–î–ª—è –º—É–ª—å—Ç–∏—Ö–æ—Å—Ç–∞)

**Overlay** —Å–µ—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º –Ω–∞ **—Ä–∞–∑–Ω—ã—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Ö–æ—Å—Ç–∞—Ö** –æ–±—â–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π.

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ **Docker Swarm** –∏ **Kubernetes**
- –°–æ–∑–¥–∞—ë—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å–µ—Ç—å –ø–æ–≤–µ—Ä—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ (–æ–±—ã—á–Ω–æ VXLAN)


### –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π bridge —Å–µ—Ç–∏
```shell
docker network create myapp-networker Swarm (–∫–ª–∞—Å—Ç–µ—Ä Docker)  
```

‚úÖ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ö–æ—Å—Ç–∞—Ö  
‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  

### üîß –ü—Ä–∞–∫—Ç–∏–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç Docker Swarm)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Swarm (—Å–æ–∑–¥–∞—ë—Ç –∫–ª–∞—Å—Ç–µ—Ä)
docker swarm init

# –°–æ–∑–¥–∞—ë–º overlay —Å–µ—Ç—å
docker network create --driver overlay my-overlay

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å –≤ overlay —Å–µ—Ç–∏
docker service create --name web --network my-overlay --replicas 3 nginx:alpine–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –Ω–æ–¥–∞—Ö —Å–º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ `my-overlay`.

---
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –Ω–æ–¥–∞—Ö —Å–º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ my-overlay.



üîå –ö–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–±—â–∞—é—Ç—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π?

1. –í –æ–¥–Ω–æ–π bridge —Å–µ—Ç–∏ ‚Äî —á–µ—Ä–µ–∑ DNS
Docker –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç DNS-—Å–µ—Ä–≤–µ—Ä –≤ –∫–∞–∂–¥—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é bridge —Å–µ—Ç—å.
```shell
‚ùØ docker network create mynet
b1f9aaa6f467de4e0307d8bb09ebff28e1a83425f8c8fa1531229f0999ce3812

‚ùØ docker run -d --name app1 --network mynet alpine sleep 1000
63597a547e54f6d2a6aaf4aeae8758e3ac0c8ab56b6486ddf29ee725ccb06fa4

‚ùØ docker run -it --name app2 --network mynet alpine sh
‚ùØ ping app1

PING app1 (172.19.0.2): 56 data bytes
64 bytes from 172.19.0.2: seq=0 ttl=64 time=0.317 ms
64 bytes from 172.19.0.2: seq=1 ttl=64 time=0.068 ms
64 bytes from 172.19.0.2: seq=2 ttl=64 time=0.123 ms
64 bytes from 172.19.0.2: seq=3 ttl=64 time=0.084 ms
^C
--- app1 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max = 0.068/0.148/0.317 ms
```


2. –í —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö ‚Äî –∏–∑–æ–ª—è—Ü–∏—è
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
```shell
docker network create net1
docker network create net2

docker run -d --name c1 --network net1 alpine sleep 1000
docker run -d --name c2 --network net2 alpine sleep 1000

docker exec c1 ping c2  # ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–µ—Ç—è–º
```shell
docker network connect net2 c1

docker exec c1 ping c2  # ‚úÖ –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

### üåê DNS –≤–Ω—É—Ç—Ä–∏ Docker

Docker –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π DNS-—Å–µ—Ä–≤–µ—Ä (127.0.0.11) –≤ –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

–≠—Ç–æ—Ç DNS —Ä–µ–∑–æ–ª–≤–∏—Ç:
- –ò–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ ‚Üí –∏—Ö IP-–∞–¥—Ä–µ—Å–∞
- –ò–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ (–≤ Docker Swarm) ‚Üí IP –≤—Å–µ—Ö —Ä–µ–ø–ª–∏–∫

–ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
```shell
docker run -d --name web --network mynet nginx:alpine
docker exec web cat /etc/resolv.conf
```

–í—ã–≤–æ–¥:
```shell
nameserver 127.0.0.11
options ndots:0
```

127.0.0.11 ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DNS-—Å–µ—Ä–≤–µ—Ä Docker.


### –†–µ–∑–æ–ª–≤–∏–Ω–≥ –ø–æ –∏–º–µ–Ω–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```shell
docker run --rm --network mynet alpine nslookup web
```

–í—ã–≤–æ–¥:
```shell
Server:    127.0.0.11
Address:   127.0.0.11:53

Name:      web
Address:   172.20.0.2
```

Docker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≤—è–∑–∞–ª –∏–º—è web —Å IP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
‚ö†Ô∏è –í–∞–∂–Ω–æ: DNS —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö bridge —Å–µ—Ç—è—Ö, –Ω–µ –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π bridge.




### üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ç—è–º–∏

–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ç–µ–π
```shell
docker network ls
```

–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏
```shell
# Bridge (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
docker network create my-network

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –¥—Ä–∞–π–≤–µ—Ä–∞
docker network create --driver bridge my-bridge

# –° –ø–æ–¥—Å–µ—Ç—å—é
docker network create --subnet=192.168.10.0/24 my-subnet
```


#### –ò–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏
–ü–æ–∫–∞–∂–µ—Ç:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- IP-–∞–¥—Ä–µ—Å–∞
- Gateway
- Subnet


## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫ —Å–µ—Ç–∏
```shell
# –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ
docker run --network my-network nginx

# –ö —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
docker network connect my-network container_name
```

–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ—Ç —Å–µ—Ç–∏
```shell
docker network disconnect my-network container_name
```

–£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Ç–∏
```shell
docker network rm my-network
```

‚ö†Ô∏è –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å —Å–µ—Ç—å, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.


–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å–µ—Ç–µ–π
```shell
docker network prune
```

# üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö